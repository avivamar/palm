# Firebase åˆ° Supabase è®¤è¯è¿ç§» TODO æ¸…å•

**åˆ›å»ºæ—¶é—´**: 2025-07-11 17:27:00
**é¢„è®¡å®Œæˆ**: 2025-07-18
**è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ

## ğŸ¯ è¿ç§»æ€»ä½“è¿›åº¦

- [ ] **ç¬¬1é˜¶æ®µ**: ç¯å¢ƒå‡†å¤‡ (1å¤©)
- [ ] **ç¬¬2é˜¶æ®µ**: æ ¸å¿ƒåŠŸèƒ½è¿ç§» (2-3å¤©)
- [ ] **ç¬¬3é˜¶æ®µ**: æ•°æ®è¿ç§»å’Œæµ‹è¯• (1-2å¤©)
- [ ] **ç¬¬4é˜¶æ®µ**: æ¸…ç†å’Œä¼˜åŒ– (1å¤©)

---

## ğŸ“‹ ç¬¬1é˜¶æ®µï¼šç¯å¢ƒå‡†å¤‡ (ç¬¬1å¤©)

### Supabase é¡¹ç›®è®¾ç½®
- [ ] åˆ›å»º Supabase é¡¹ç›®
  - [ ] è®¿é—® [supabase.com](https://supabase.com) åˆ›å»ºæ–°é¡¹ç›®
  - [ ] è®°å½•é¡¹ç›® URL å’Œ API Keys
  - [ ] é…ç½®é¡¹ç›®åŸºç¡€è®¾ç½®

- [ ] é…ç½®è®¤è¯æä¾›å•†
  - [ ] å¯ç”¨ Email/Password è®¤è¯
  - [ ] é…ç½® Google OAuth (å¦‚æœéœ€è¦)
  - [ ] é…ç½® GitHub OAuth (å¦‚æœéœ€è¦)
  - [ ] è®¾ç½®è®¤è¯å›è°ƒ URLs

- [ ] æ•°æ®åº“è®¾è®¡
  - [ ] è®¾è®¡ç”¨æˆ·è¡¨ç»“æ„
  - [ ] åˆ›å»ºç”¨æˆ·ç›¸å…³è¡¨ (profiles, sessions ç­‰)
  - [ ] è®¾ç½® Row Level Security (RLS) ç­–ç•¥
  - [ ] åˆ›å»ºå¿…è¦çš„æ•°æ®åº“å‡½æ•°

### ç¯å¢ƒå˜é‡é…ç½®
- [ ] æ›´æ–°æœ¬åœ°ç¯å¢ƒå˜é‡
  ```env
  # ç§»é™¤ Firebase å˜é‡ (6ä¸ª)
  # NEXT_PUBLIC_FIREBASE_API_KEY=
  # NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
  # NEXT_PUBLIC_FIREBASE_PROJECT_ID=
  # NEXT_PUBLIC_FIREBASE_APP_ID=
  # NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=
  # NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=

  # æ·»åŠ  Supabase å˜é‡ (ä»…2ä¸ª)
  NEXT_PUBLIC_SUPABASE_URL=your-project-url.supabase.co
  NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
  ```

- [ ] æ›´æ–° Railway ç”Ÿäº§ç¯å¢ƒå˜é‡
  - [ ] ç™»å½• Railway Dashboard
  - [ ] åˆ é™¤æ‰€æœ‰ Firebase ç¯å¢ƒå˜é‡
  - [ ] æ·»åŠ  Supabase ç¯å¢ƒå˜é‡
  - [ ] éªŒè¯é…ç½®æ­£ç¡®æ€§

### ä¾èµ–åŒ…ç®¡ç†
- [ ] å®‰è£… Supabase ä¾èµ–
  ```bash
  npm install @supabase/supabase-js @supabase/auth-helpers-nextjs
  npm install @supabase/auth-helpers-react @supabase/auth-ui-react
  ```

- [ ] æ›´æ–° package.json
  - [ ] æ·»åŠ  Supabase ç›¸å…³ä¾èµ–
  - [ ] ä¿ç•™ Firebase ä¾èµ– (è¿ç§»æœŸé—´)
  - [ ] æ›´æ–° TypeScript ç±»å‹å®šä¹‰

---

## ğŸ”§ ç¬¬2é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½è¿ç§» (ç¬¬2-3å¤©)

### é…ç½®æ–‡ä»¶é‡å†™
- [ ] åˆ›å»º `src/libs/supabase/config.ts`
  ```typescript
  import { createClientComponentClient, createServerComponentClient } from '@supabase/auth-helpers-nextjs';
  import { cookies } from 'next/headers';

  // å®¢æˆ·ç«¯ Supabase å®¢æˆ·ç«¯
  export const createClient = () => createClientComponentClient();

  // æœåŠ¡ç«¯ Supabase å®¢æˆ·ç«¯
  export const createServerClient = () => createServerComponentClient({ cookies });
  ```

- [ ] åˆ›å»º `src/libs/supabase/auth.ts`
  ```typescript
  // å°è£…è®¤è¯ç›¸å…³åŠŸèƒ½
  export const signUp = async (email: string, password: string) => { ... };
  export const signIn = async (email: string, password: string) => { ... };
  export const signOut = async () => { ... };
  export const getCurrentUser = async () => { ... };
  ```

- [ ] åˆ›å»º `src/libs/supabase/types.ts`
  ```typescript
  // ç”Ÿæˆæ•°æ®åº“ç±»å‹å®šä¹‰
  export interface Database {
    public: {
      Tables: {
        users: { ... },
        profiles: { ... }
      }
    }
  }
  ```

### è®¤è¯ç»„ä»¶é‡å†™
- [ ] æ›´æ–° `src/contexts/AuthContext.tsx`
  - [ ] æ›¿æ¢ Firebase è®¤è¯é€»è¾‘
  - [ ] ä½¿ç”¨ Supabase ç”¨æˆ·çŠ¶æ€ç®¡ç†
  - [ ] ä¿æŒç›¸åŒçš„ API æ¥å£ (å‡å°‘ç»„ä»¶ä¿®æ”¹)

- [ ] åˆ›å»º `src/components/auth/SupabaseAuth.tsx`
  - [ ] ä½¿ç”¨ Supabase Auth UI ç»„ä»¶
  - [ ] æ”¯æŒå¤šç§ç™»å½•æ–¹å¼
  - [ ] é›†æˆç°æœ‰æ ·å¼ç³»ç»Ÿ

- [ ] æ›´æ–° `src/app/[locale]/layout.tsx`
  - [ ] æ›¿æ¢è®¤è¯æä¾›è€…
  - [ ] åˆå§‹åŒ– Supabase ä¼šè¯
  - [ ] ä¿æŒå›½é™…åŒ–æ”¯æŒ

### API è·¯ç”±é‡å†™
- [ ] é‡å†™ `src/app/api/auth/session/route.ts`
  - [ ] ä½¿ç”¨ Supabase ä¼šè¯éªŒè¯
  - [ ] ä¿æŒç›¸åŒçš„å“åº”æ ¼å¼

- [ ] é‡å†™ `src/app/api/auth/create-session/route.ts`
  - [ ] å®ç° Supabase ç™»å½•é€»è¾‘
  - [ ] å¤„ç†é”™è¯¯å’ŒéªŒè¯

- [ ] é‡å†™ `src/app/api/auth/logout/route.ts`
  - [ ] å®ç° Supabase ç™»å‡ºé€»è¾‘
  - [ ] æ¸…ç†ä¼šè¯æ•°æ®

- [ ] é‡å†™ `src/app/api/auth/verify-session/route.ts`
  - [ ] ä½¿ç”¨ Supabase ä»¤ç‰ŒéªŒè¯
  - [ ] æ›´æ–°ç”¨æˆ·æƒé™æ£€æŸ¥

### ä¸­é—´ä»¶æ›´æ–°
- [ ] æ›´æ–° `src/middleware.ts`
  - [ ] é›†æˆ Supabase ä¸­é—´ä»¶
  - [ ] å¤„ç†è®¤è¯è·¯ç”±ä¿æŠ¤
  - [ ] ä¿æŒå›½é™…åŒ–è·¯ç”±æ”¯æŒ

---

## ğŸ”„ ç¬¬3é˜¶æ®µï¼šæ•°æ®è¿ç§»å’Œæµ‹è¯• (ç¬¬1-2å¤©)

### ç”¨æˆ·æ•°æ®è¿ç§»
- [ ] åˆ†æç°æœ‰ Firebase ç”¨æˆ·æ•°æ®
  - [ ] å¯¼å‡ºç”¨æˆ·åˆ—è¡¨å’ŒåŸºæœ¬ä¿¡æ¯
  - [ ] è¯†åˆ«ç”¨æˆ·å…ƒæ•°æ®å’Œè‡ªå®šä¹‰å­—æ®µ
  - [ ] å‡†å¤‡æ•°æ®æ˜ å°„ç­–ç•¥

- [ ] å®ç°æ•°æ®è¿ç§»è„šæœ¬
  - [ ] åˆ›å»º `scripts/migrate-users.ts`
  - [ ] æ‰¹é‡è¿ç§»ç”¨æˆ·è´¦æˆ·
  - [ ] å¤„ç†å¯†ç é‡ç½® (æ— æ³•è¿ç§»å¯†ç å“ˆå¸Œ)
  - [ ] ä¿ç•™ç”¨æˆ· UID æ˜ å°„å…³ç³»

- [ ] é€šçŸ¥ç”¨æˆ· (å¦‚éœ€è¦)
  - [ ] å‘é€è¿ç§»é€šçŸ¥é‚®ä»¶
  - [ ] æä¾›å¯†ç é‡ç½®é“¾æ¥
  - [ ] è¯´æ˜è¿ç§»åçš„å˜æ›´

### åŠŸèƒ½æµ‹è¯•
- [ ] æœ¬åœ°å¼€å‘ç¯å¢ƒæµ‹è¯•
  - [ ] ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
  - [ ] ç”¨æˆ·ç™»å½•åŠŸèƒ½
  - [ ] ç¬¬ä¸‰æ–¹ OAuth ç™»å½•
  - [ ] å¯†ç é‡ç½®åŠŸèƒ½
  - [ ] ä¼šè¯æŒä¹…æ€§
  - [ ] æƒé™æ§åˆ¶

- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æµ‹è¯•
  - [ ] Railway ç¯å¢ƒå˜é‡éªŒè¯
  - [ ] æ„å»ºå’Œéƒ¨ç½²æˆåŠŸ
  - [ ] è®¤è¯æµç¨‹ç«¯åˆ°ç«¯æµ‹è¯•
  - [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

### å›å½’æµ‹è¯•
- [ ] ç›¸å…³åŠŸèƒ½æµ‹è¯•
  - [ ] ç”¨æˆ·ä»ªè¡¨æ¿è®¿é—®
  - [ ] æ”¯ä»˜æµç¨‹ (å¦‚æœä¾èµ–è®¤è¯)
  - [ ] ç®¡ç†å‘˜æƒé™åŠŸèƒ½
  - [ ] API ç«¯ç‚¹ä¿æŠ¤

- [ ] æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•
  - [ ] Chrome/Edge/Firefox/Safari
  - [ ] ç§»åŠ¨ç«¯æµè§ˆå™¨æµ‹è¯•
  - [ ] ç¬¬ä¸‰æ–¹ç™»å½•åœ¨å„æµè§ˆå™¨çš„è¡¨ç°

---

## ğŸ§¹ ç¬¬4é˜¶æ®µï¼šæ¸…ç†å’Œä¼˜åŒ– (ç¬¬1å¤©)

### Firebase ä¾èµ–æ¸…ç†
- [ ] ç§»é™¤ Firebase ç›¸å…³æ–‡ä»¶
  - [ ] åˆ é™¤ `src/libs/firebase/` æ•´ä¸ªç›®å½•
  - [ ] ç§»é™¤ Firebase ç›¸å…³ç»„ä»¶å¼•ç”¨
  - [ ] æ¸…ç†æœªä½¿ç”¨çš„ import è¯­å¥

- [ ] æ›´æ–° package.json
  - [ ] å¸è½½ Firebase ç›¸å…³åŒ…
    ```bash
    npm uninstall firebase @firebase/app @firebase/auth
    ```
  - [ ] æ¸…ç† package-lock.json
  - [ ] è¿è¡Œ `npm audit` æ£€æŸ¥å®‰å…¨æ€§

- [ ] æ›´æ–°é…ç½®æ–‡ä»¶
  - [ ] æ¸…ç† `next.config.ts` ä¸­çš„ Firebase é…ç½®
  - [ ] ç§»é™¤ç¯å¢ƒå˜é‡éªŒè¯ä¸­çš„ Firebase å­—æ®µ
  - [ ] æ›´æ–° TypeScript é…ç½® (å¦‚éœ€è¦)

### æ€§èƒ½ä¼˜åŒ–
- [ ] Bundle å¤§å°ä¼˜åŒ–
  - [ ] æ£€æŸ¥æ‰“åŒ…ä½“ç§¯å˜åŒ–
  - [ ] ç§»é™¤æœªä½¿ç”¨çš„ä»£ç 
  - [ ] ä¼˜åŒ– import ç­–ç•¥

- [ ] ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
  - [ ] é…ç½® Supabase å®¢æˆ·ç«¯ç¼“å­˜
  - [ ] ä¼˜åŒ–è®¤è¯çŠ¶æ€ç®¡ç†
  - [ ] å®ç°æ™ºèƒ½é¢„å–

### æ–‡æ¡£æ›´æ–°
- [ ] æ›´æ–°å¼€å‘æ–‡æ¡£
  - [ ] `README.md` è®¤è¯éƒ¨åˆ†
  - [ ] ç¯å¢ƒå˜é‡é…ç½®è¯´æ˜
  - [ ] éƒ¨ç½²æŒ‡å—æ›´æ–°

- [ ] åˆ›å»ºè¿ç§»æ–‡æ¡£
  - [ ] è®°å½•è¿ç§»è¿‡ç¨‹
  - [ ] é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
  - [ ] æ€§èƒ½å¯¹æ¯”æ•°æ®

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§
- [ ] æ‰€æœ‰è®¤è¯åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] ç”¨æˆ·æ•°æ®å®Œæ•´è¿ç§»
- [ ] ç¬¬ä¸‰æ–¹ç™»å½•æ­£å¸¸
- [ ] æƒé™æ§åˆ¶æœ‰æ•ˆ

### æ€§èƒ½æŒ‡æ ‡
- [ ] è®¤è¯å“åº”æ—¶é—´ < 500ms
- [ ] é¡µé¢åŠ è½½æ—¶é—´æ— æ˜æ˜¾å¢åŠ 
- [ ] Bundle å¤§å°å‡å°‘æˆ–ä¿æŒ
- [ ] æ— è®¤è¯ç›¸å…³é”™è¯¯

### ç¨³å®šæ€§ä¿è¯
- [ ] è¿ç»­è¿è¡Œ 24 å°æ—¶æ— é—®é¢˜
- [ ] å‹åŠ›æµ‹è¯•é€šè¿‡
- [ ] é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„
- [ ] ç›‘æ§å‘Šè­¦é…ç½®å®Œæˆ

---

## ğŸš¨ é£é™©é¢„æ¡ˆ

### é«˜é£é™©é¡¹
- [ ] **æ•°æ®ä¸¢å¤±é£é™©**:
  - è¿ç§»å‰å®Œæ•´å¤‡ä»½
  - å®æ–½åˆ†æ‰¹è¿ç§»
  - ä¿ç•™ Firebase æ•°æ® 7 å¤©

- [ ] **æœåŠ¡ä¸­æ–­é£é™©**:
  - å‡†å¤‡å¿«é€Ÿå›æ»šæ–¹æ¡ˆ
  - éƒ¨ç½²åœ¨ä½å³°æ—¶æ®µ
  - ç›‘æ§ç³»ç»Ÿå®æ—¶æ£€æŸ¥

- [ ] **ç”¨æˆ·ä½“éªŒå½±å“**:
  - æå‰é€šçŸ¥ç”¨æˆ·
  - å‡†å¤‡å®¢æœæ”¯æŒ
  - å¯†ç é‡ç½®æµç¨‹ä¼˜åŒ–

### åº”æ€¥è”ç³»
- **æŠ€æœ¯è´Ÿè´£äºº**: [è”ç³»æ–¹å¼]
- **äº§å“è´Ÿè´£äºº**: [è”ç³»æ–¹å¼]
- **è¿ç»´è´Ÿè´£äºº**: [è”ç³»æ–¹å¼]

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-07-11 17:27:00
**ä¸‹æ¬¡æ£€æŸ¥**: 2025-07-12 09:00:00
