# Shopify 集成重构任务清单 - 商业价值优先

## 🎯 商业目标

**核心目标**：用最小的工作量消除代码重复，降低维护成本，提升系统稳定性

**预期收益**：
- 减少 50% 的 Shopify 相关 bug 修复时间
- 提升 30% 的新功能开发速度
- 降低 40% 的代码维护成本

## 🚀 最小化实施计划 (2天完成)

### 第一天：核心替换

#### 1.1 创建 MinimalShopifyClient
- [ ] 创建 `packages/shopify/src/core/minimal-client.ts`
  - 实现 `createOrder()` 方法（核心商业功能）
  - 实现 `healthCheck()` 方法（运维必需）
  - 实现 `request()` 方法（向后兼容）
  - 添加单例模式和配置管理
  - _商业价值: 统一代码入口，消除重复_

#### 1.2 替换现有实现
- [x] 更新 `packages/shopify/src/index.ts` 导出新客户端
  - 导出 MinimalShopifyClient
  - 保持向后兼容的别名 (ShopifyClient, ShopifyAdminClient)
  - _商业价值: 零技术分裂，平滑迁移_

#### 1.3 删除重复代码
- [ ] 删除 `src/libs/shopify/` 整个目录
  - 备份现有实现（以防回滚）
  - 删除重复的客户端代码
  - _商业价值: 直接消除维护成本_

### 第二天：验证和清理

#### 2.1 功能验证
- [ ] 测试订单同步功能正常工作
- [ ] 验证健康检查端点响应
- [ ] 确认 Admin UI 正常显示
- [ ] 检查所有导入引用正确
- _商业价值: 确保零功能回归_

#### 2.2 代码清理
- [ ] 更新所有 import 语句指向新包
- [ ] 移除未使用的代码和依赖
- [ ] 更新相关文档和注释
- _商业价值: 完成技术债务清理_

## 📋 商业价值验收标准

### 成功指标
- [ ] 代码重复率从 100% 降到 0%
- [ ] 只有一个 Shopify 客户端实现
- [ ] 所有现有功能保持正常
- [ ] 订单同步成功率保持 99.9%

### 风险控制
- [ ] 保留完整的代码备份
- [ ] 准备一键回滚脚本
- [ ] 在测试环境先验证

## 🎯 实施优先级

**立即执行**：第一天任务（核心商业价值）
**可选执行**：第二天任务（质量保证）
**暂缓执行**：其他复杂功能（避免过度工程化）

这个最小化方案确保我们专注于核心商业价值：**消除代码重复，降低维护成本**。